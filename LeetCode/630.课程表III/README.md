## 题目描述
这里有 n 门不同的在线课程，按从 1 到 n 编号。给你一个数组 courses ，其中 courses[i] = [durationi, lastDayi] 表示第 i 门课将会 持续 上 durationi 天课，并且必须在不晚于 lastDayi 的时候完成。

你的学期从第 1 天开始。且不能同时修读两门及两门以上的课程。

返回你最多可以修读的课程数目。

示例 1：
```
输入：courses = [[100, 200], [200, 1300], [1000, 1250], [2000, 3200]]
输出：3
解释：
这里一共有 4 门课程，但是你最多可以修 3 门：
首先，修第 1 门课，耗费 100 天，在第 100 天完成，在第 101 天开始下门课。
第二，修第 3 门课，耗费 1000 天，在第 1100 天完成，在第 1101 天开始下门课程。
第三，修第 2 门课，耗时 200 天，在第 1300 天完成。
第 4 门课现在不能修，因为将会在第 3300 天完成它，这已经超出了关闭日期。
```
示例 2：
```
输入：courses = [[1,2]]
输出：1
```
示例 3：
```
输入：courses = [[3,2],[4,3]]
输出：0
```

提示:
```
1 <= courses.length <= 10^4
1 <= durationi, lastDayi <= 10^4
```

### 解法 可替换的贪心（两次贪心）堆
这题还挺有意思的。
明确题意，给出一系列课程表示为`[t, d]`。其中`t`表示上这个课需要用的相对时间段长度，而`d`表示绝对的deadline。
换言之，时间轴上，上一门课后时间就要向前走`t`，如果走了`t`之后停留的时间点大于`d`了，那么就说明这门课不算数，因此就不能上。
在这样的前提下，求最多能上多少门课。

我们从简单到复杂慢慢分析。
首先，显而易见的一点是，所有`t > d`的课程都应该被过滤掉。因为是无法上的课。

接着，其实比较容易想到的思路是贪心，问题在于怎么贪。有两个方向。
第一，选择t尽量小的课程上。预留出尽可能多的空余时间给其他课程。
第二，选择d尽量小的课程上。率先上掉紧迫的课程。
仔细考虑后发现应该选择第二种。比如给出一个例子如`[(100, 1000), (200, 250)]`。如果按第一种原则，就只能上一门课。按第二种原则才能上两门。

上面这个猜测是可以严格证明的。设两门课分别是`[t1, d1]`和`[t2, d2]`，且`d1 <= d2`。
假设当前已经累计的时间为`x`，若先上第一再上第二门，那么需要同时满足：
```text
x + t1 <= d1
x + t1 + t2 <= d2
```
反过来，则需要同时满足：
```text
x + t2 <= d2
x + t1 + t2 <= d1
```
由于先决条件是`d1 <= d2`，因此在下面不等式中若`x + t1 + t2 <= d1`成立，则必然有`x + t1 + t2 <= d2`以及`x + t1 <= d1`成立。
换言之，若可以做到"先上第二再上第一门课"，那么必然可以做到"先上第一，再上第二门课"。但是反过来这个结论不成立。
因此，从最优的角度思考，应该始终选择最紧迫的课程，即`d`最小的课程来上。

题目到这里似乎已经解决了。就是对输入根据d从小到大进行排序，然后挨个遍历，选取遍历过程中符合条件的最长子序列即可。
但是，这道题的最妙的一点在于，并不是这样。
比如下面这个示例：
```text
[100, 200],
[500, 800],
[400, 900],
[600, 1100]
```
可以看到，如果按照上面说的朴素的贪心思想，那么在上完0，1（下标，下同）这两门课之后，2，3两门课都没法上，因为会超时。
但是实际上，在选择了1这课之后，扫描到2时，会发现，其实2花时间比1更少且deadline更久远。
因此其实选择2要比1合算多了。
因此，我们这里应该采取的策略是，用2替换1。
这么一来，我们就可以在后续扫描到3时继续上3这门课。

更一般的，当我们有一些已经选择的课之后，新扫描到一门课如果比已选择的某个课deadline更久远（如果提前将数组按照deadline从小到大排序，那么这是一定的）
且花时间更少，那么我们可以用新课替换已经选择的那课。
换言之，对于已经选择的课，我们用一个大顶堆维护起来，保证我们时刻可以找到已选择的课中耗时最长的那个，用于被替换。
这也是本题思路中的第二次贪心。

总结一下，第一次贪心是确保deadline紧迫的课先上。但是由于牵扯到耗时，所以这样的结果不一定科学。
而扫描过程中，如果遇到更合算的课程，那么我们就选择将已选择的某个课替换成新课。而这个选择的过程是第二次贪心，即选择耗时最长的课来替换。
第一次贪心用一个简单排序就行了。第二次贪心则需要有一个大顶堆。